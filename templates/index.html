<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ user.name }} | Portfolio</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">

    <style>
        /* --- INTRO SCREEN STYLES --- */
        #intro-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background-color: #000;
            z-index: 9999;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }

        #intro-video-player {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .fade-out {
            opacity: 0;
            pointer-events: none;
        }
        
        /* Link Styles */
        .project-link {
            text-decoration: none;
            color: inherit;
            display: block;
            transition: transform 0.2s ease;
        }
        .project-link:hover {
            transform: scale(1.02);
            opacity: 0.9;
        }
    </style>
</head>
<body>

    <div id="intro-overlay">
        <video id="intro-video-player" autoplay muted playsinline>
            <source src="{{ url_for('static', filename='intro.mp4') }}" type="video/mp4">
        </video>
    </div>

    <nav class="navbar">
        <a href="#projects">PROJECTS</a>
        <a href="#skills">SKILLS</a>
        <a href="#about">ABOUT</a>
        <a href="#contact">CONTACT</a>
    </nav>

    <header class="hero-section">
        <h1 class="hero-title">{{ user.name }}</h1>
        <div class="hero-subtitles">
            <p>{{ user.title }}</p>
            <p>{{ user.location }}</p>
        </div>

        <div class="hero-image-container">
            <img src="{{ url_for('static', filename='profile.png') }}" 
                 alt="{{ user.name }}" 
                 class="hero-image"
                 style="width: 100%; height: 100%; object-fit: cover; object-position: top center !important;">
        </div>
    </header>

    <section id="projects" class="section-pad">
        <h2 class="section-title">SELECT PROJECTS</h2>
        <div class="projects-grid">
            
            {% for project in user.projects %}
            
                {% set link = "#" %}
                
                {% if "PDF Summarizer" in project.title %}
                    {% set link = "https://github.com/deveshtripathiii/PDF-Summarizer" %}
                {% elif "Nutrition" in project.title %}
                    {% set link = "https://github.com/deveshtripathiii/Nutrition-App" %}
                {% endif %}
                
                <a href="{{ link }}" target="_blank" class="project-link">
                    <div class="project-card">
                        <img src="{{ url_for('static', filename=project.image) }}" 
                             onerror="this.src='https://via.placeholder.com/600x400/333/fff?text={{ project.title }}'" 
                             alt="{{ project.title }}" 
                             class="project-image">
                        <div class="project-info">
                            <h3 class="project-title">{{ project.title }}</h3>
                            <p class="project-category">{{ project.category }}</p>
                        </div>
                    </div>
                </a>
                
            {% endfor %}
            
        </div>
    </section>

    <section id="skills" class="section-pad skills-section">
        <h2 class="section-title-center">DEVELOPER<br>TECH STACK</h2>
        <img src="{{ url_for('static', filename='profile.png') }}" alt="{{ user.name }}" class="small-profile-img">
        <div class="skills-tags-container">
            {% for skill in user.skills %}
            <span class="skill-tag">{{ skill }}</span>
            {% endfor %}
        </div>
    </section>

    <section id="about" class="section-pad about-section">
        <div class="about-text-content">
            <h2 class="bio-headline">{{ user.bio_headline }}</h2>
            <p class="bio-text">{{ user.bio_text }}</p>
        </div>
    </section>

    <footer id="contact" class="footer-section">
        <h2 class="footer-title">CONTACT {{ user.name }}</h2>
        <div class="footer-links">
            <div class="email-link">
                <p>EMAIL</p>
                <a href="mailto:{{ user.email }}" class="big-link">{{ user.email }}</a>
            </div>
            <div class="social-links">
                <p>SOCIAL</p>
                {% for link in user.social %}
                <a href="{{ link.url }}" target="_blank" class="big-link">{{ link.name }}</a>
                {% endfor %}
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; {{ year }}</p>
            <p>{{ user.location }}</p>
            <p>{{ time }}</p>
        </div>
    </footer>

    <div class="cursor-glow"></div>

    <script>
        // Mouse Glow
        const glow = document.querySelector('.cursor-glow');
        document.addEventListener('mousemove', (e) => {
            glow.style.left = e.clientX + 'px';
            glow.style.top = e.clientY + 'px';
        });

        // Intro Video Logic
        const introOverlay = document.getElementById('intro-overlay');
        const introVideo = document.getElementById('intro-video-player');

        introVideo.onended = function() {
            introOverlay.classList.add('fade-out');
            setTimeout(() => {
                introOverlay.style.display = 'none';
            }, 1000);
        };
    </script>

</body>
</html>
